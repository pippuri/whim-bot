{
  "swagger": "2.0",
  "info": {
    "version": "0.1.0",
    "description": "MaaS serverless infrastructure"
  },
  "host": "api.dev.maas.global",
  "basePath": "/",
  "schemes": [
    "https"
  ],
  "tags": [],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    },
    "authorizationHeader": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  },
  "paths": {
    "/": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/auth/me": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-auth-me",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/auth/mqtt": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-auth-mqtt",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/auth/sms-login": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-auth-sms-login",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "code",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/auth/sms-request-code": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-auth-sms-request-code",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "phone",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/autocomplete": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-autocomplete",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/geocoding": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-geocoding",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/geocoding/reverse-google": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-geocoding-reverse-google",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "lat",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "lon",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/locations": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-locations",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/monitor": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-monitor",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/profile": {
      "put": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "put-profile",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      },
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-profile",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/profile/active-route": {
      "put": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "put-profile-active-route",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/profile/favorite-locations": {
      "post": {
        "tags": [],
        "summary": "Add an user favorite location",
        "description": "Add an user favorite location to the his/her list on DynamoDB",
        "operationId": "post-profile-favorite-locations",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "Location that will be added to user's favoriteLocations list",
            "required": true,
            "schema": {
              "$ref": "request-schema.json#/properties"
            }
          }
        ],
        "responses": {
          "200": {
            "application/json": {},
            "description": "Success"
          },
          "default": {
            "description": "Errors"
          }
        }
      },
      "delete": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "delete-profile-favorite-locations",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/profile/history/route": {
      "post": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "post-profile-history-route",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/profile/history/transaction": {
      "post": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "post-profile-history-transaction",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/profile/plan/{planId}": {
      "put": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "put-profile-plan-planId",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [
          {
            "name": "planId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/providers/digitransit/routes": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-digitransit-routes",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "leaveAt",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "arriveBy",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/providers/here/routes": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-here-routes",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "leaveAt",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "arriveBy",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/providers/hsl/routes": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-hsl-routes",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/providers/matka/routes": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-matka-routes",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/providers/taxi/cancel": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-taxi-cancel",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/providers/taxi/get": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-taxi-get",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/providers/taxi/order": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-taxi-order",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/providers/taxi/validate": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-taxi-validate",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/providers/tripgo/regions": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-tripgo-regions",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/providers/tripgo/routes-middlefinland": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-tripgo-routes-middlefinland",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "leaveAt",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "arriveBy",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/providers/tripgo/routes-northfinland": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-tripgo-routes-northfinland",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "leaveAt",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "arriveBy",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/providers/tripgo/routes-southfinland": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-providers-tripgo-routes-southfinland",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "leaveAt",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "arriveBy",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/routes": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-routes",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "from",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "to",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "leaveAt",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "arriveBy",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/store/package": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-store-package",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "type",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/store/packages": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-store-packages",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "authorizationHeader": []
          }
        ],
        "parameters": [],
        "responses": {}
      }
    },
    "/swagger/maas-api-json": {
      "get": {
        "tags": [],
        "summary": "",
        "description": "",
        "operationId": "get-swagger-maas-api-json",
        "produces": [
          "application/json"
        ],
        "security": [],
        "parameters": [],
        "responses": {}
      }
    },
    "/tracking/active-route": {
      "delete": {
        "tags": [],
        "summary": "Cancel active route",
        "description": "Cancels any currently active route and route leg.",
        "operationId": "delete-tracking-active-route",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {}
            }
          }
        }
      },
      "get": {
        "tags": [],
        "summary": "Get active route",
        "description": "Gets the currently active route. The response includes both the active route and the active route leg.",
        "operationId": "get-tracking-active-route",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "routeId": {
                  "type": "string",
                  "description": "Identifier of currently active route"
                },
                "timestamp": {
                  "type": "number",
                  "description": "Time when route was activated (JavaScript timestamp)"
                },
                "activeLeg": {
                  "type": "object",
                  "description": "Currently active route leg",
                  "properties": {
                    "legId": {
                      "type": "string",
                      "description": "Identifier of currently active route leg"
                    },
                    "timestamp": {
                      "type": "number",
                      "description": "Time when route was activated (JavaScript timestamp)"
                    }
                  }
                },
                "startTime": {
                  "type": "number",
                  "description": "Route start time"
                },
                "endTime": {
                  "type": "number",
                  "description": "Route start time"
                },
                "legs": {
                  "type": "array",
                  "description": "List of route legs in time order",
                  "items": {
                    "type": "object",
                    "properties": {}
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [],
        "summary": "Set active route",
        "description": "Sets the currently active route. There can only be one active route per user.",
        "operationId": "put-tracking-active-route",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": "true",
            "schema": {
              "type": "object",
              "properties": {
                "routeId": {
                  "type": "string",
                  "description": "Identifier of currently active route"
                },
                "timestamp": {
                  "type": "number",
                  "description": "Time when route was activated (JavaScript timestamp)"
                },
                "activeLeg": {
                  "type": "object",
                  "description": "Currently active route leg",
                  "properties": {
                    "legId": {
                      "type": "string",
                      "description": "Identifier of currently active route leg"
                    },
                    "timestamp": {
                      "type": "number",
                      "description": "Time when route was activated (JavaScript timestamp)"
                    }
                  }
                },
                "startTime": {
                  "type": "number",
                  "description": "Route start time"
                },
                "endTime": {
                  "type": "number",
                  "description": "Route start time"
                },
                "legs": {
                  "type": "array",
                  "description": "List of route legs in time order",
                  "items": {
                    "type": "object",
                    "properties": {}
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "routeId": {
                  "type": "string",
                  "description": "Identifier of currently active route"
                },
                "timestamp": {
                  "type": "number",
                  "description": "Time when route was activated (JavaScript timestamp)"
                },
                "activeLeg": {
                  "type": "object",
                  "description": "Currently active route leg",
                  "properties": {
                    "legId": {
                      "type": "string",
                      "description": "Identifier of currently active route leg"
                    },
                    "timestamp": {
                      "type": "number",
                      "description": "Time when leg was activated (JavaScript timestamp)"
                    }
                  }
                },
                "startTime": {
                  "type": "number",
                  "description": "Route start time"
                },
                "endTime": {
                  "type": "number",
                  "description": "Route start time"
                },
                "legs": {
                  "type": "array",
                  "description": "List of route legs in time order",
                  "items": {
                    "type": "object",
                    "properties": {}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/tracking/active-route/active-leg": {
      "put": {
        "tags": [],
        "summary": "Set active route leg",
        "description": "Sets the currently active route leg. A route must already have been activated earlier, and the leg must be a leg in that route.",
        "operationId": "put-tracking-active-route-active-leg",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": "true",
            "schema": {
              "type": "object",
              "properties": {
                "legId": {
                  "type": "string",
                  "description": "Identifier of currently active route leg"
                },
                "timestamp": {
                  "type": "number",
                  "description": "Time when leg was activated (JavaScript timestamp)"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "legId": {
                  "type": "string",
                  "description": "Identifier of currently active route leg"
                },
                "timestamp": {
                  "type": "number",
                  "description": "Time when leg was activated (JavaScript timestamp)"
                }
              }
            }
          }
        }
      }
    },
    "/tracking/user-location": {
      "put": {
        "tags": [],
        "summary": "Update user location",
        "description": "Updates user's current location (latitude and longitude).",
        "operationId": "put-tracking-user-location",
        "produces": [
          "application/json"
        ],
        "security": [
          {
            "Bearer": []
          }
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": "true",
            "schema": {
              "type": "object",
              "properties": {
                "lat": {
                  "type": "number",
                  "description": "Location latitude"
                },
                "lon": {
                  "type": "number",
                  "description": "Location longitude"
                },
                "timestamp": {
                  "type": "number",
                  "description": "Location timestamp"
                },
                "legId": {
                  "type": "number",
                  "description": "Active leg identifier"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "lat": {
                  "type": "number",
                  "description": "Location latitude"
                },
                "lon": {
                  "type": "number",
                  "description": "Location longitude"
                },
                "timestamp": {
                  "type": "number",
                  "description": "Location timestamp"
                },
                "legId": {
                  "type": "number",
                  "description": "Active leg identifier"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {}
}
